<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ú–µ–Ω—é –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞ ‚Äî —ç–Ω–µ—Ä–≥–∏—è –∏ –π–æ–≥–∞</title>

<style>
:root{
  --bg:#f6faf7;
  --card:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --green:#6fbf8a;
  --green-dark:#2f6f4e;
  --green-soft:#e9f6ee;
  --border:#e6efe9;
  --radius:18px;
  --shadow:0 12px 28px rgba(0,0,0,.06);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:1100px;
  margin:auto;
  padding:24px 16px 60px;
}

/* HEADER */
.header{
  display:flex;
  gap:14px;
  align-items:flex-start;
}
.logo{
  width:48px;height:48px;
  border-radius:16px;
  background:var(--green-soft);
  display:grid;place-items:center;
  font-size:22px;
}
h1{
  margin:0;
  font-size:34px;
  color:var(--green-dark);
}
.subtitle{
  margin:8px 0 0;
  color:var(--muted);
  max-width:800px;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:1.1fr .9fr;
  gap:18px;
  margin-top:20px;
}
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}

/* CARD */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:20px;
  box-shadow:var(--shadow);
  border:1px solid var(--border);
}
.card h2{margin:0 0 10px}
.hint{color:var(--muted);font-size:14px}

/* FORM */
.form{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
  margin-top:14px;
}
@media(max-width:700px){
  .form{grid-template-columns:1fr}
}
.field{
  position:relative;
}
.field span{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  font-size:18px;
  opacity:.6;
}
.field input,
.field select{
  width:100%;
  padding:12px 12px 12px 42px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:16px;
}
label{
  display:block;
  font-size:13px;
  color:var(--muted);
  margin-bottom:4px;
}

/* BUTTONS */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:var(--green);
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  margin-top:14px;
}
button.secondary{
  background:var(--green-soft);
  color:var(--green-dark);
}
.btn-row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.btn-row button{width:auto}

/* RESULT */
.result{display:none;margin-top:16px}
.kcal{
  font-size:28px;
  font-weight:900;
  color:var(--green-dark);
}
.meals{
  margin-top:14px;
  display:grid;
  gap:10px;
}
.meal{
  background:#fff;
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
}
.meal b{display:block}

/* TABS */
.tabs{display:flex;gap:10px;margin-top:16px}
.tab{
  border:1px solid var(--border);
  padding:10px 14px;
  border-radius:999px;
  background:#fff;
  cursor:pointer;
  font-weight:700;
}
.tab.active{
  background:var(--green-soft);
  color:var(--green-dark);
}

/* MENU DAY */
.menu-box{display:none;margin-top:14px}
.copy{
  margin-top:10px;
  background:#fff;
  border:1px dashed var(--border);
  color:var(--green-dark);
}

/* WEEK MENU */
.day{
  border:1px solid var(--border);
  border-radius:14px;
  margin-bottom:10px;
  overflow:hidden;
}
.day-header{
  padding:12px;
  background:#f7fbf8;
  font-weight:800;
  cursor:pointer;
}
.day-content{
  display:none;
  padding:12px;
  background:#fff;
}
.day.open .day-content{display:block}

/* SMART MENU */
textarea{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid #ddd;
  min-height:90px;
  font-size:15px;
}
.smart-out{display:none;margin-top:14px}

/* FOOTER */
.footer{
  margin-top:14px;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="wrap">

<div class="header">
  <div class="logo">ü•ó</div>
  <div>
    <h1>–ú–µ–Ω—é –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞</h1>
    <p class="subtitle">
      –ú—è–≥–∫–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∂–µ–Ω—â–∏–Ω, –ø—Ä–∞–∫—Ç–∏–∫—É—é—â–∏—Ö –π–æ–≥—É –∏ –≤—ã–±–∏—Ä–∞—é—â–∏—Ö –±–µ—Ä–µ–∂–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ–ª—É.
      –ë–µ–∑ –¥–∏–µ—Ç, –∑–∞–ø—Ä–µ—Ç–æ–≤ –∏ –¥–∞–≤–ª–µ–Ω–∏—è.
    </p>
  </div>
</div>

<div class="grid">

<!-- LEFT -->
<div class="card">
<h2>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç</h2>
<p class="hint">–û—Ä–∏–µ–Ω—Ç–∏—Ä –ø–æ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –ø–∏—Ç–∞–Ω–∏—é ‚Äî —Å–ø–æ–∫–æ–π–Ω–æ –∏ –±–µ–∑ –∂—ë—Å—Ç–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.</p>

<div class="form">
  <div>
    <label>–í–µ—Å</label>
    <div class="field"><span>‚öñÔ∏è</span><input id="weight" type="number" placeholder="–∫–≥"></div>
  </div>
  <div>
    <label>–†–æ—Å—Ç</label>
    <div class="field"><span>üìè</span><input id="height" type="number" placeholder="—Å–º"></div>
  </div>
  <div>
    <label>–í–æ–∑—Ä–∞—Å—Ç</label>
    <div class="field"><span>üéÇ</span><input id="age" type="number"></div>
  </div>
  <div>
    <label>–ü–æ–ª</label>
    <div class="field"><span>üë§</span>
      <select id="gender">
        <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
        <option value="male">–ú—É–∂—Å–∫–æ–π</option>
      </select>
    </div>
  </div>
  <div>
    <label>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</label>
    <div class="field"><span>üßò‚Äç‚ôÄÔ∏è</span>
      <select id="activity">
        <option value="1.2">–ù–∏–∑–∫–∞—è (–æ—Ñ–∏—Å, –¥–æ—Ä–æ–≥–∞)</option>
        <option value="1.35">–£–º–µ—Ä–µ–Ω–Ω–∞—è</option>
        <option value="1.45">–ô–æ–≥–∞ 1‚Äì2 —Ä–∞–∑–∞</option>
        <option value="1.55">–ô–æ–≥–∞ 2‚Äì3 —Ä–∞–∑–∞</option>
        <option value="1.7">–ô–æ–≥–∞ 3+ —Ä–∞–∑</option>
      </select>
    </div>
  </div>
  <div>
    <label>–¶–µ–ª—å</label>
    <div class="field"><span>üéØ</span>
      <select id="goal">
        <option value="0.9">–ú—è–≥–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ</option>
        <option value="1">–ë–∞–ª–∞–Ω—Å</option>
        <option value="1.05">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º—ã</option>
      </select>
    </div>
  </div>
</div>

<button onclick="calc()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

<div class="result" id="result">
  <p class="kcal">‚âà <span id="cal"></span> –∫–∫–∞–ª –≤ –¥–µ–Ω—å</p>

  <div class="meals" id="meals"></div>

  <div class="tabs">
    <div class="tab active" onclick="showDay()">–ü—Ä–∏–º–µ—Ä –Ω–∞ –¥–µ–Ω—å</div>
    <div class="tab" onclick="showWeek()">–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</div>
  </div>

  <div class="menu-box" id="dayMenu"></div>
  <div class="menu-box" id="weekMenu"></div>

  <button class="copy" onclick="copyMenu()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é</button>
</div>
</div>

<!-- RIGHT -->
<div class="card">
<h2>–£–º–Ω–æ–µ –º–µ–Ω—é –∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h2>
<p class="hint">–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ, —á—Ç–æ —É–∂–µ –µ—Å—Ç—å –¥–æ–º–∞ ü§ç</p>

<input type="file" onchange="fillFromPhoto()">
<textarea id="products" placeholder="—è–π—Ü–∞, —Ç–≤–æ—Ä–æ–≥, –æ–≤–æ—â–∏, –∫—É—Ä–∏—Ü–∞"></textarea>
<button class="secondary" onclick="smartMenu()">–°–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ–Ω—é</button>

<div class="smart-out" id="smartOut"></div>

<div class="footer">
–°–µ—Ä–≤–∏—Å –Ω–æ—Å–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.
</div>
</div>

</div>
</div>

<script>
let lastText="";

function calc(){
  let w=+weight.value,h=+height.value,a=+age.value;
  if(!w||!h||!a)return;
  let g=gender.value,act=+activity.value,goal=+goal.value;
  let bmr=g==="male"?10*w+6.25*h-5*a+5:10*w+6.25*h-5*a-161;
  let cal=Math.round(bmr*act*goal);
  document.getElementById("cal").innerText=cal;
  result.style.display="block";

  let b=Math.round(cal*0.3),
      l=Math.round(cal*0.35),
      s=Math.round(cal*0.15),
      d=cal-b-l-s;

  meals.innerHTML=`
  <div class="meal"><b>ü´ê –ó–∞–≤—Ç—Ä–∞–∫</b>${b} –∫–∫–∞–ª</div>
  <div class="meal"><b>üç≤ –û–±–µ–¥</b>${l} –∫–∫–∞–ª</div>
  <div class="meal"><b>üçè –ü–µ—Ä–µ–∫—É—Å</b>${s} –∫–∫–∞–ª</div>
  <div class="meal"><b>ü•ó –£–∂–∏–Ω</b>${d} –∫–∫–∞–ª</div>
  `;

  dayMenu.innerHTML=`
  <div class="meal">–ó–∞–≤—Ç—Ä–∞–∫: –∫–∞—à–∞ / —è–π—Ü–∞ / —Ñ—Ä—É–∫—Ç—ã</div>
  <div class="meal">–û–±–µ–¥: –±–µ–ª–æ–∫ + –≥–∞—Ä–Ω–∏—Ä + –æ–≤–æ—â–∏</div>
  <div class="meal">–ü–µ—Ä–µ–∫—É—Å: —Ç–≤–æ—Ä–æ–≥ / –π–æ–≥—É—Ä—Ç</div>
  <div class="meal">–£–∂–∏–Ω: –æ–≤–æ—â–∏ + –±–µ–ª–æ–∫</div>
  `;
  showDay();
  buildWeek();
}

function showDay(){
  dayMenu.style.display="block";
  weekMenu.style.display="none";
}
function showWeek(){
  dayMenu.style.display="none";
  weekMenu.style.display="block";
}

function buildWeek(){
  let days=["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞","–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"];
  weekMenu.innerHTML="";
  days.forEach(d=>{
    weekMenu.innerHTML+=`
    <div class="day">
      <div class="day-header" onclick="this.parentNode.classList.toggle('open')">${d}</div>
      <div class="day-content">
        –ó–∞–≤—Ç—Ä–∞–∫ ‚Ä¢ –û–±–µ–¥ ‚Ä¢ –ü–µ—Ä–µ–∫—É—Å ‚Ä¢ –£–∂–∏–Ω
      </div>
    </div>`;
  });
}

function copyMenu(){
  let text=document.getElementById("result").innerText;
  navigator.clipboard.writeText(text);
  alert("–ú–µ–Ω—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ");
}

function fillFromPhoto(){
  products.value="—è–π—Ü–∞, —Ç–≤–æ—Ä–æ–≥, –æ–≤–æ—â–∏";
}

function smartMenu(){
  let p=products.value;
  if(!p)return;
  smartOut.style.display="block";
  smartOut.innerHTML=`
  <div class="meal">–ó–∞–≤—Ç—Ä–∞–∫ –∏–∑ ${p}</div>
  <div class="meal">–û–±–µ–¥ –∏–∑ ${p}</div>
  <div class="meal">–ü–µ—Ä–µ–∫—É—Å –∏–∑ ${p}</div>
  <div class="meal">–£–∂–∏–Ω –∏–∑ ${p}</div>
  `;
}
</script>
</body>
</html>
