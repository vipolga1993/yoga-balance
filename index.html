<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ô–æ–≥–∞-–ë–∞–ª–∞–Ω—Å ‚Äî –º–µ–Ω—é –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞</title>

  <style>
    :root{
      --bg:#f7faf7;
      --card:#ffffff;
      --green:#6fbf8a;
      --green-dark:#2f4f3f;
      --text:#232323;
      --muted:#6b6b6b;
      --border:#e6eee8;
      --warn:#b42318;
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:22px;
    }
    .brand{
      display:flex;
      gap:10px;
      align-items:flex-start;
      margin-bottom:14px;
    }
    .brand h1{
      margin:0;
      font-size:30px;
      line-height:1.1;
      color:var(--green-dark);
      letter-spacing:-0.2px;
    }
    .brand p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:18px;
      margin-top:16px;
      box-shadow:0 10px 25px rgba(0,0,0,.04);
    }
    .card h2{
      margin:0 0 10px;
      font-size:20px;
      color:var(--green-dark);
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width:760px){
      .grid{grid-template-columns:1fr}
    }
    label{
      display:block;
      font-size:13px;
      color:var(--muted);
      margin-bottom:6px;
    }
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      font-size:15px;
      outline:none;
    }
    input:focus, select:focus, textarea:focus{
      border-color:#cfe7d7;
      box-shadow:0 0 0 4px rgba(111,191,138,.15);
    }
    .row{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .btn{
      width:100%;
      border:none;
      border-radius:16px;
      padding:14px 14px;
      cursor:pointer;
      font-weight:700;
      font-size:16px;
    }
    .btn.primary{background:var(--green); color:#fff;}
    .btn.primary:active{transform:translateY(1px);}
    .btn.secondary{background:#eaf6ef; color:var(--green-dark);}
    .btn.secondary:active{transform:translateY(1px);}
    .hint{color:var(--muted); font-size:13px; margin-top:8px;}
    .error{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(180,35,24,.25);
      background:rgba(180,35,24,.06);
      color:var(--warn);
      font-size:14px;
      display:none;
    }
    .out{
      margin-top:12px;
      display:none;
    }
    .pill{
      display:inline-block;
      margin:8px 8px 0 0;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#f3faf6;
      font-size:14px;
      color:var(--green-dark);
      font-weight:700;
    }
    .out .line{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      background:#f1f7f3;
      border:1px solid var(--border);
      line-height:1.55;
      font-size:14px;
      color:#2a2a2a;
    }
    .split{
      display:grid;
      grid-template-columns:1.2fr .8fr;
      gap:14px;
    }
    @media(max-width:900px){
      .split{grid-template-columns:1fr}
    }
    textarea{min-height:86px; resize:vertical;}
    .footer-note{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brand">
      <div style="font-size:28px;line-height:1">üåø</div>
      <div>
        <h1>–ú–µ–Ω—é –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞</h1>
        <p>–ú—è–≥–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–∏—Ç–∞–Ω–∏—é –∏ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –π–æ–≥–∏. –ë–µ–∑ –¥–∏–µ—Ç –∏ –¥–∞–≤–ª–µ–Ω–∏—è.</p>
      </div>
    </div>

    <!-- –†–ê–°–ß–Å–¢ -->
    <div class="card">
      <h2>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç</h2>

      <!-- –í–ê–ñ–ù–û: —ç—Ç–æ —Ñ–æ—Ä–º–∞. –ö–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞, –∞ submit –º—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º -->
      <form id="calcForm" novalidate>
        <div class="grid">
          <div>
            <label for="weight">–í–µ—Å (–∫–≥)</label>
            <input id="weight" type="number" inputmode="decimal" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 63" min="25" max="250" step="0.1" required />
          </div>
          <div>
            <label for="height">–†–æ—Å—Ç (—Å–º)</label>
            <input id="height" type="number" inputmode="numeric" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 168" min="120" max="230" step="1" required />
          </div>

          <div>
            <label for="age">–í–æ–∑—Ä–∞—Å—Ç</label>
            <input id="age" type="number" inputmode="numeric" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 32" min="12" max="90" step="1" required />
          </div>

          <div>
            <label for="gender">–ü–æ–ª</label>
            <select id="gender" required>
              <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
              <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            </select>
          </div>

          <div>
            <label for="activity">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</label>
            <select id="activity" required>
              <option value="1.2">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (–æ—Ñ–∏—Å/–º–∞–ª–æ —à–∞–≥–æ–≤)</option>
              <option value="1.35">–ô–æ–≥–∞ 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é</option>
              <option value="1.55">–ô–æ–≥–∞ 3‚Äì4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é</option>
              <option value="1.75">–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
            </select>
          </div>

          <div>
            <label for="goal">–¶–µ–ª—å</label>
            <select id="goal" required>
              <option value="maintain">–ë–∞–ª–∞–Ω—Å –∏ —ç–Ω–µ—Ä–≥–∏—è</option>
              <option value="loss">–ú—è–≥–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ</option>
              <option value="gain">–ü–æ–¥–¥–µ—Ä–∂–∫–∞/–Ω–∞–±–æ—Ä</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:14px">
          <button class="btn primary" type="submit">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>

        <div id="calcError" class="error"></div>

        <div id="calcOut" class="out">
          <div>
            <span id="kcalPill" class="pill"></span>
            <span id="bmrPill" class="pill"></span>
          </div>

          <div class="line" id="macroLine"></div>

          <div class="split">
            <div class="line" id="mealsLine"></div>
            <div class="line" id="tipsLine"></div>
          </div>

          <div class="footer-note">
            ‚ö†Ô∏è –≠—Ç–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä. –ü—Ä–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è—Ö, –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏, –†–ü–ü –∏–ª–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –ª—É—á—à–µ –æ–±—Å—É–¥–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º.
          </div>
        </div>
      </form>
    </div>

    <!-- –ú–ï–ù–Æ –ò–ó –ü–†–û–î–£–ö–¢–û–í (–æ—Å—Ç–∞–≤–ª—è—é –∫–∞–∫ –±—ã–ª–æ, –ø–æ—Ç–æ–º —É–ª—É—á—à–∏–º) -->
    <div class="card">
      <h2>–ú–µ–Ω—é –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –µ—Å—Ç—å</h2>
      <p class="hint">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ (–¥–ª—è –≤–∞—Å) –∏/–∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∏—Ç –ø—Ä–∏–º–µ—Ä –º–µ–Ω—é.</p>

      <input id="photo" type="file" accept="image/*" />

      <div style="margin-top:10px">
        <label for="products">–ü—Ä–æ–¥—É–∫—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
        <textarea id="products" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: —è–π—Ü–∞, —Ç–≤–æ—Ä–æ–≥, –æ–≤—Å—è–Ω–∫–∞, —è–±–ª–æ–∫–∏, –æ–≤–æ—â–∏"></textarea>
      </div>

      <button class="btn secondary" type="button" id="menuBtn">–°–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ–Ω—é</button>

      <div id="menuBox" class="out" style="display:none">
        <div class="line" id="menuText"></div>
      </div>

      <div class="footer-note">
        –§–æ—Ç–æ –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ ‚Äú–ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞‚Äù (–±—Ä–∞—É–∑–µ—Ä –Ω–µ —É–º–µ–µ—Ç —Å–∞–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–π AI-—á–∞—Å—Ç–∏). –î–∞–ª—å—à–µ —Å–¥–µ–ª–∞–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ.
      </div>
    </div>

  </div>

<script>
  // ---------- —É—Ç–∏–ª–∏—Ç—ã ----------
  function roundInt(x){ return Math.round(Number(x)); }
  function clamp(x, a, b){ return Math.min(Math.max(x, a), b); }

  function showError(msg){
    const el = document.getElementById('calcError');
    el.textContent = msg;
    el.style.display = 'block';
  }
  function hideError(){
    const el = document.getElementById('calcError');
    el.textContent = '';
    el.style.display = 'none';
  }
  function showOut(){
    document.getElementById('calcOut').style.display = 'block';
  }

  // ---------- —Ä–∞—Å—á—ë—Ç ----------
  function calcBMR({w, h, a, gender}){
    // Mifflin-St Jeor
    if (gender === 'male') return 10*w + 6.25*h - 5*a + 5;
    return 10*w + 6.25*h - 5*a - 161;
  }

  function goalFactor(goal){
    // –º—è–≥–∫–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
    if (goal === 'loss') return 0.88;   // -12%
    if (goal === 'gain') return 1.08;   // +8%
    return 1.0;                         // –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ
  }

  function calcMacros({calories, w, goal}){
    // –±–µ–ª–æ–∫ ‚Äî —á—É—Ç—å –≤—ã—à–µ –ø—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏
    const proteinPerKg = (goal === 'loss') ? 1.6 : 1.3;
    const fatPerKg = 0.8;

    let p = roundInt(w * proteinPerKg);  // –≥—Ä–∞–º–º—ã
    let f = roundInt(w * fatPerKg);      // –≥—Ä–∞–º–º—ã

    // —É–≥–ª–µ–≤–æ–¥—ã ‚Äî –æ—Å—Ç–∞—Ç–æ–∫
    const calFromPF = p*4 + f*9;
    let c = roundInt((calories - calFromPF)/4);

    // –∑–∞—â–∏—Ç–∞ –æ—Ç —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    c = clamp(c, 60, 600);

    return {p,f,c};
  }

  function mealSplit(calories){
    // 4 –ø—Ä–∏—ë–º–∞ ‚Äî —É–¥–æ–±–Ω—ã–π –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
    const breakfast = roundInt(calories * 0.28);
    const lunch     = roundInt(calories * 0.34);
    const snack     = roundInt(calories * 0.16);
    const dinner    = roundInt(calories * 0.22);
    return {breakfast, lunch, snack, dinner};
  }

  // ---------- UI ----------
  const form = document.getElementById('calcForm');

  form.addEventListener('submit', (e) => {
    e.preventDefault(); // –≥–ª–∞–≤–Ω–æ–µ: –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
    hideError();

    const w = Number(document.getElementById('weight').value);
    const h = Number(document.getElementById('height').value);
    const a = Number(document.getElementById('age').value);
    const gender = document.getElementById('gender').value;
    const activity = Number(document.getElementById('activity').value);
    const goal = document.getElementById('goal').value;

    // –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è
    if (!w || !h || !a) return showError("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–µ—Å, —Ä–æ—Å—Ç –∏ –≤–æ–∑—Ä–∞—Å—Ç.");
    if (w < 25 || w > 250) return showError("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Å: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 25 –¥–æ 250 –∫–≥.");
    if (h < 120 || h > 230) return showError("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ—Å—Ç: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 120 –¥–æ 230 —Å–º.");
    if (a < 12 || a > 90) return showError("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 12 –¥–æ 90 –ª–µ—Ç.");

    const bmr = calcBMR({w, h, a, gender});
    const cal = roundInt(bmr * activity * goalFactor(goal));

    const macros = calcMacros({calories: cal, w, goal});
    const split = mealSplit(cal);

    // –≤—ã–≤–æ–¥
    document.getElementById('kcalPill').textContent = `–û—Ä–∏–µ–Ω—Ç–∏—Ä: ${cal} –∫–∫–∞–ª/–¥–µ–Ω—å`;
    document.getElementById('bmrPill').textContent  = `BMR: ${roundInt(bmr)} –∫–∫–∞–ª`;

    document.getElementById('macroLine').innerHTML =
      `<b>–ë–ñ–£-–æ—Ä–∏–µ–Ω—Ç–∏—Ä:</b> –±–µ–ª–∫–∏ ${macros.p} –≥ ‚Ä¢ –∂–∏—Ä—ã ${macros.f} –≥ ‚Ä¢ —É–≥–ª–µ–≤–æ–¥—ã ${macros.c} –≥
       <div class="hint">–ï—Å–ª–∏ –≥–æ–ª–æ–¥–Ω–æ ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –æ–≤–æ—â–∏/–±–µ–ª–æ–∫. –ï—Å–ª–∏ —Ç—è–∂–µ–ª–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî —á—É—Ç—å –±–æ–ª—å—à–µ —É–≥–ª–µ–≤–æ–¥–æ–≤ –≤ –∑–∞–≤—Ç—Ä–∞–∫/–æ–±–µ–¥.</div>`;

    document.getElementById('mealsLine').innerHTML =
      `<b>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏—ë–º–∞–º (–ø—Ä–∏–º–µ—Ä):</b><br><br>
       üç≥ <b>–ó–∞–≤—Ç—Ä–∞–∫</b> ~ ${split.breakfast} –∫–∫–∞–ª<br>
       üç≤ <b>–û–±–µ–¥</b> ~ ${split.lunch} –∫–∫–∞–ª<br>
       ü•õ <b>–ü–µ—Ä–µ–∫—É—Å</b> ~ ${split.snack} –∫–∫–∞–ª<br>
       ü•ó <b>–£–∂–∏–Ω</b> ~ ${split.dinner} –∫–∫–∞–ª<br><br>
       <span class="hint">–≠—Ç–æ –Ω–µ ‚Äú–∑–∞–∫–æ–Ω‚Äù, –∞ —É–¥–æ–±–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è—Ç—å –º–µ—Å—Ç–∞–º–∏ –ø–æ–¥ –≤–∞—à –≥—Ä–∞—Ñ–∏–∫.</span>`;

    const goalText = (goal==='loss') ? '–º—è–≥–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ' : (goal==='gain' ? '–ø–æ–¥–¥–µ—Ä–∂–∫–∞/–Ω–∞–±–æ—Ä' : '–±–∞–ª–∞–Ω—Å');
    document.getElementById('tipsLine').innerHTML =
      `<b>–ü–æ–¥ –≤–∞—à—É —Ü–µ–ª—å:</b><br><br>
       ‚Ä¢ –¶–µ–ª—å: <b>${goalText}</b><br>
       ‚Ä¢ –ü–µ—Ä–µ–¥ –π–æ–≥–æ–π: –ª—ë–≥–∫–∏–π —É–≥–ª–µ–≤–æ–¥ + –≤–æ–¥–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)<br>
       ‚Ä¢ –ü–æ—Å–ª–µ: –±–µ–ª–æ–∫ + –Ω–µ–º–Ω–æ–≥–æ —É–≥–ª–µ–≤–æ–¥–æ–≤<br><br>
       <span class="hint">–î–∞–ª—å—à–µ –º—ã –¥–æ–±–∞–≤–∏–º ‚Äú–≥—Ä–∞–º–º–æ–≤–∫–∏‚Äù –ø–æ—Ä—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: —Å–∫–æ–ª—å–∫–æ —Ç–≤–æ—Ä–æ–≥–∞ –Ω–∞ 300‚Äì400 –∫–∫–∞–ª).</span>`;

    showOut();
  });

  // ---------- –º–µ–Ω—é –∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ----------
  document.getElementById('menuBtn').addEventListener('click', () => {
    const list = document.getElementById('products').value.trim();
    if (!list){
      alert("–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–∏–ª–∏ —Ö–æ—Ç—è –±—ã 3‚Äì4 –ø—Ä–æ–¥—É–∫—Ç–∞).");
      return;
    }
    document.getElementById('menuBox').style.display = 'block';
    document.getElementById('menuText').innerHTML =
      `<b>–ü—Ä–∏–º–µ—Ä –º–µ–Ω—é –Ω–∞ –¥–µ–Ω—å (–∫–∞–∫ —à–∞–±–ª–æ–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é)</b><br><br>
       <b>–ó–∞–≤—Ç—Ä–∞–∫:</b> –±–ª—é–¥–æ –∏–∑ ${list} (–æ—Ä–∏–µ–Ω—Ç–∏—Ä 350‚Äì450 –∫–∫–∞–ª)<br>
       <b>–û–±–µ–¥:</b> –æ—Å–Ω–æ–≤–Ω–æ–µ –±–ª—é–¥–æ –∏–∑ ${list} (–æ—Ä–∏–µ–Ω—Ç–∏—Ä 450‚Äì600 –∫–∫–∞–ª)<br>
       <b>–ü–µ—Ä–µ–∫—É—Å:</b> –ª—ë–≥–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ ${list} (–æ—Ä–∏–µ–Ω—Ç–∏—Ä 200‚Äì350 –∫–∫–∞–ª)<br>
       <b>–£–∂–∏–Ω:</b> –º—è–≥–∫–∏–π –ø—Ä–∏—ë–º –ø–∏—â–∏ –∏–∑ ${list} (–æ—Ä–∏–µ–Ω—Ç–∏—Ä 300‚Äì450 –∫–∫–∞–ª)<br><br>
       <span class="hint">–ü–æ—Ç–æ–º —Å–¥–µ–ª–∞–µ–º —É–º–Ω–µ–µ: –ø–æ–¥—Å—Ç–∞–≤–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±–ª—é–¥–∞ –∏ –≥—Ä–∞–º–º–æ–≤–∫–∏.</span>`;
  });
</script>
</body>
</html>
